package com.synergisticit.util;

import java.util.Arrays;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

import com.synergisticit.domain.Employee;
import com.synergisticit.repository.EmployeeRepository;

@Component
public class CommandLineRunnerImpl implements CommandLineRunner{
	
    @Autowired
    private EmployeeRepository employeeRepository;
    
    // CREATE

	@Override
	public void run(String... args) throws Exception {
		// TODO Auto-generated method stub
		List<Employee> employees = Arrays.asList(
				new Employee("John", "CEO", (double) 70000),
				new Employee("Oscar", "Programer",(double) 30000),
				new Employee("Kalani", "Sr Programer",(double) 40000),
				new Employee("Kelsey", "UX designer",(double) 35000)
				);
				
		employeeRepository.saveAll(employees);
		
		// READ
		
		System.out.println("\nAll employees:");
		employeeRepository.findAll().forEach(System.out::println);
		
		// UPDATE
		
		Employee emp = employeeRepository.findById(2).orElseThrow();
		emp.setDesignation("Sr. Programmer");
		emp.setSalary(53000d);
		employeeRepository.save(emp);
		
		
		// Prints All After Update
		System.out.println("\nAll employees:");
		employeeRepository.findAll().forEach(System.out::println);
		
		// Delete
		Integer idToDelete = employeeRepository.findAll().get(0).getEmpId();
        employeeRepository.deleteById(idToDelete);

        System.out.println("\nAfter delete:");
        employeeRepository.findAll().forEach(System.out::println);
		
	
		
		
	}
	
}
