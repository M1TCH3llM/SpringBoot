package com.synergisticit.util;

import com.synergisticit.domain.Employee;
import com.synergisticit.repository.EmployeeRepository;
import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

@Component
public class EmployeeRunner implements CommandLineRunner {

    private final EmployeeRepository repo;

    public EmployeeRunner(EmployeeRepository repo) { this.repo = repo; }

    @Override
    public void run(String... args) {

        // ---- CREATE ----
//        Employee e1 = repo.save(new Employee("John", "CEO", 70000.0));
//        Employee e2 = repo.save(new Employee("Oscar", "Programmer", 30000.0));

        // ---- READ ----
        System.out.println("\nAll employees:");
        repo.findAll().forEach(System.out::println);

        // ---- UPDATE ----
        e2.setSalary(32000.0);
        repo.save(e2);
        System.out.println("\nAfter update:");
        repo.findAll().forEach(System.out::println);

        // ---- DELETE ----
        repo.deleteById(e1.getEmpId());
        System.out.println("\nAfter delete:");
        repo.findAll().forEach(System.out::println);
    }
}
